{% extends "instructions.html" %}

{% block head_js %}
{% endblock %}

{% block header %}
{{ super() }}
<div class="inst_header">
    <div class="narrow">
        <h4>{{lesson.name}}</h4>
        <div class="progress">
            <div class="bar"></div>
        </div>
        <h5>Your Progress</h5>
    </div>
</div>
{% endblock %}

{% block main %}
{{ super() }}
<div class="narrow">
    <section id="link1">
        <h2>Step 1</h2>
        <p>Click the button below to log in to Foursquare.</p>
        <p>If you already have a Foursquare account, please log in.</p>
        <p>If you do not have a Foursquare account, click “sign up for Foursquare.”</p>
        <a id="fsLoginBtn" class="btn btn-large" href="{{foursquare_auth_url|safe}}">Login to Foursquare</a>
        <p>After logging in, you'll need to give the How to City app permission to talk to your Foursquare account. Don’t worry, we’re not posting anything on your profile or collect any information about you!</p>
        <div class='feedback'>
            <h2>Hi {% if user %}{{ user.user.firstName }}{% endif %}!</h2>
            <p>You've logged in to Foursquare and given How to City the permission it needs to teach you how to create a Foursquare venue.<p>
        </div>
    </section>
    <section id="link2">
        <h2>Step 2</h2>
        <p>How to City is going to open up the Foursquare website.</p>
        <a id="open_foursquare" class="btn">Open up Foursqaure</a>
        <div class='feedback'>
            <h2>Let’s check it out!</h2>
        </div>
   </section>
    <section id="link3">
        <h2>Step 3</h2>
        <p>Search for your business on Foursquare.</p>
        <p>Does your business have a page already?</p>
        <a id="foursquare_yes" class="btn">Yes!</a>
        <a id="foursquare_no" class="btn">No :(</a>
        <div class='feedback'>
            <div class='yes'>
                <h2>Great!</h2>
                <p>Save your business to your ToDo list!</p>
                <img src="{{ url_for('static', filename='img/fs_todo_button.png') }}">


                <!-- <p>We'll take you to the next lesson now. It will show you how to Claim Ownership of your business on Foursquare.</p>
                <a id="foursquare_claim_venue" class="btn" href="../../foursquare_claim_venue" target="parent">Next Foursquare Lesson</a> -->
            </div>
            <div class='no'>
                <h2>Lets make one!</h2>
                <p>Click here to open up the right page on Foursquare.</p>
                <a id="foursquare_create_venue" class="btn">Create Foursquare Venue</a>
            </div>
        </div>
    </section>
    <section id="link4">
        <h2>Step 4</h2>
        <p>Enter your business name and address.</p>
        <p>Here are some tips from Foursquare about this step.</p>
        <img src="{{ url_for('static', filename='img/foursquare_instructions.png') }}">
        <p>Move the pin on the map if you need to.</p>
        <p>Enter your phone and twitter if you want.</p>
        <p>Choose a category for your business.</p>
        <div class="tips">
            Want to read the Style Guide first?
            <a id="foursquare_style_guide" class="btn">Foursquare Style Guide</a>
            <a id="close_style_guide" class="btn">Close Style Guide</a>
        </div>
        <p>
        <div class='feedback'>
            <h2>When you've finished making your venue, click next here.</h2>
        </div>
    </section>
    <section id="link5">
        <h2>Step 5</h2>
        <p>To let us know what vusiness you just added to Foursquare, copy and paste the venue's id into the box.</p>
        <form>
            <input type="text" id="venue_id" class="input-xlarge" placeholder="4d1a21edbb488cfa8dc9c2d4">
            <a id="submit" class='btn'>Submit</a>
        </form>

        <div class='feedback'>
           <p>Rad!</p>
            <p>The next lesson will teach you how to claim ownership of this venue.</p>
            <a id="foursquare_claim_venue" class="btn" href="../../foursquare_claim_venue" target="parent">Next Foursquare Lesson</a>
        </div>
    </section>
</div>
{% endblock %}

{% block js_footer %}
    <script src="{{ url_for('static', filename='js/foursquare.js') }}"></script>
    {% if user %}
        <script>
            $('#link1 .feedback').toggle();
        </script>
    {% endif %}
    <script>
    $('#submit').click(function(){
        var venue_id = $('#venue_id').val();
        console.log(typeof(venue_id));
        $.getJSON('{{request.url_root}}/foursquare/venue/'+venue_id, function(venue){
                $('#link5 .feedback').prepend('<h2>'+venue.venue.name+'</h2>')
                $('#link5 .feedback').toggle()
            }
        );
    })
    </script>
{% endblock %}